<h1>タスク一覧</h1>

<%# 検索フォーム作成 %>
<%= search_form_for @q, class: 'mb-5' do |f|%>
  <%# 名称検索フォーム %>
  <div class="form-group row">
    <%= f.label :name_cont, '名称検索', class: 'col-sm-2 col-form-label'%>
    <div class="col-sm-10">
      <%= f.search_field :name_cont, class: 'form-control'%>
    </div>
  </div>
  <%# 検索ボタン %>
  <div class="form-group">
    <%= f.submit class: 'btn btn-outline-primary'%>
  </div>
<%end%>

<div class="mt-3">
  <%= link_to '新規作成', new_task_path, class: 'btn btn-outline-dark' %>
</div>

<div class="mt-5">
    <table class="table table-hover">
        <thead class="thead-default">
            <tr>
                <th><%=Task.human_attribute_name(:name)%></th>
                <th><%=Task.human_attribute_name(:created_at)%></th>
                <th></th>
                <th></th>
            </tr>
            <tbody>
                <%@tasks.each do |task|%>
                    <tr>
                        <td><%=link_to task.name, task%></td>
                        <td><%=task.created_at%></td>
                        <td><%=link_to '編集', edit_task_path(task), class: 'btn btn-primary mr-3'%></td>
                        <td><%=link_to '削除', task, method: :delete, data: { confirm: "タスク「#{task.name}」を削除します。よろしいですか？" }, class: 'btn btn-danger'%></td>
                    </tr>
                <%end%>
            </tbody>
        </thead>
    </table>
</div>